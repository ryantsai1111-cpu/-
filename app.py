import streamlit as st
import pandas as pd

# è¨­å®šç¶²é é…ç½®
st.set_page_config(
    page_title="æ—¥èªå­¸ç¿’é“å ´",
    page_icon="ğŸ‡¯ğŸ‡µ",
    layout="wide"
)

# å´é‚Šæ¬„å°èˆª
st.sidebar.title("å°è¦½åˆ—")
page = st.sidebar.radio("é¸æ“‡å–®å…ƒ", ["é¦–é ", "å¸¸è¦‹éŒ¯èª¤æ¸¬é©—", "å‹•è©è®ŠåŒ–å·¥å…·", "JLPT æ”»ç•¥", "å­¸ç¿’è³‡æºæ¨è–¦"])

# --- 1. é¦–é  ---
if page == "é¦–é ":
    st.title("ğŸ‡¯ğŸ‡µ æ­¡è¿ä¾†åˆ°æ—¥èªå­¸ç¿’é“å ´")
    st.markdown("""
    é€™æ˜¯ä¸€å€‹å°ˆç‚ºæ—¥èªå­¸ç¿’è€…æ‰“é€ çš„äº’å‹•å¼ç¶²ç«™ã€‚æˆ‘å€‘æ•´åˆäº†èªæ³•é‡é»ã€å‹•è©è®ŠåŒ–è¦å‰‡èˆ‡ JLPT è€ƒè©¦è³‡è¨Šã€‚
    
    ### ğŸ’¡ å­¸ç¿’å¿ƒæ³•
    > ã€Œæ¯å¤©ä¸€é»é»ä¹Ÿå¥½ï¼ŒæŒçºŒä¸‹å»ã€‚è¼¸å…¥å’Œè¼¸å‡ºçš„ç´¯ç©ï¼Œä¸€å®šæœƒè®Šæˆå·¨å¤§çš„æˆé•·ã€‚ã€
    
    ### ç¶²ç«™åŠŸèƒ½é è¦½ï¼š
    - **å¸¸è¦‹éŒ¯èª¤**ï¼šç³¾æ­£å½¢å®¹è©èª¤ç”¨ã€éå»å¼éŒ¯èª¤ã€‚
    - **å‹•è©è®ŠåŒ–**ï¼šä¸€éµæŸ¥è©¢äº”æ®µå‹•è©è®ŠåŒ–ã€‚
    - **JLPT è³‡è¨Š**ï¼šå„ç´šæ•¸èƒ½åŠ›æŒ‡æ¨™èˆ‡è²»ç”¨ã€‚
    """)
    
    st.info("è«‹å¾å·¦å´é¸å–®é–‹å§‹ä½ çš„å­¸ç¿’ä¹‹æ—…ï¼")

# --- 2. å¸¸è¦‹éŒ¯èª¤æ¸¬é©— ---
elif page == "å¸¸è¦‹éŒ¯èª¤æ¸¬é©—":
    st.title("âš ï¸ å¸¸è¦‹éŒ¯èª¤ç³¾å¯ŸéšŠ")
    st.markdown("å¾ˆå¤šå­¸ç¿’è€…å¸¸çŠ¯åŒæ¨£çš„éŒ¯èª¤ï¼Œé›–ç„¶æ—¥æœ¬äººèƒ½ç†è§£ï¼Œä½†èªæ³•ä¸Šæ˜¯ä¸æ­£ç¢ºçš„ ã€‚")
    
    st.subheader("éš¨å ‚å°æ¸¬é©—")
    
    # é¡Œç›® 1
    q1 = st.radio(
        "Q1. æƒ³è¦èªªã€Œç´…è‰²çš„è¡£æœã€ï¼Œå“ªä¸€å€‹æ˜¯æ­£ç¢ºçš„ï¼Ÿ",
        ("èµ¤ã„ã®æœ", "èµ¤ã„æœ")
    )
    if q1 == "èµ¤ã„æœ":
        st.success("âœ… æ­£ç¢ºï¼å½¢å®¹è©èˆ‡åè©ä¹‹é–“ä¸éœ€è¦åŠ ã€Œã®ã€ ã€‚")
    elif q1 == "èµ¤ã„ã®æœ":
        st.error("âŒ éŒ¯èª¤ã€‚å½¢å®¹è©ç›´æ¥æ¥åè©å³å¯ï¼Œå¦‚ï¼šã‹ã‚ã„ã„å¥³æ€§ã€ä¸¸ã„ã‚¤ã‚¹ ã€‚")
        
    st.divider()
    
    # é¡Œç›® 2
    q2 = st.radio(
        "Q2. ã€Œå¾ˆæœ‰è¶£ã€çš„éå»å¼ï¼ˆå¾ˆæœ‰è¶£ç•¶æ™‚ï¼‰ï¼Œè©²æ€éº¼èªªï¼Ÿ",
        ("æ¥½ã—ã„ã§ã—ãŸ", "æ¥½ã—ã‹ã£ãŸã§ã™")
    )
    if q2 == "æ¥½ã—ã‹ã£ãŸã§ã™":
        st.success("âœ… æ­£ç¢ºï¼å» i å½¢å®¹è©çš„éå»å¼æ˜¯å°‡ã€Œã„ã€æ”¹æˆã€Œã‹ã£ãŸã€+ ã§ã™ ã€‚")
    elif q2 == "æ¥½ã—ã„ã§ã—ãŸ":
        st.error("âŒ éŒ¯èª¤ã€‚é€™çœ‹èµ·ä¾†åƒæ²’å—éæ•™è‚²çš„èªªæ³•ã€‚æ­£ç¢ºè¦å‰‡æ˜¯å»æ‰ã€Œã„ã€åŠ ä¸Šã€Œã‹ã£ãŸã€ ã€‚")

# --- 3. å‹•è©è®ŠåŒ–å·¥å…· ---
elif page == "å‹•è©è®ŠåŒ–å·¥å…·":
    st.title("ğŸ”¢ å‹•è©è®ŠåŒ–ç‰¹è¨“")
    st.markdown("å‹•è©è®ŠåŒ–å…¶å¯¦å°±æ˜¯ã€Œæ¯éŸ³æ”¹è®Š + èªå°¾åŠ©å‹•è©ã€çš„éç¨‹ [cite: 261]ã€‚")
    
    # ç°¡å–®çš„å‹•è©å­—å…¸ (ç¯„ä¾‹)
    verbs = {
        "æ›¸ã (kaku) - å¯«": {"type": "ä¸€é¡ (äº”æ®µ)", "stem": "kak", "te": "æ›¸ã„ã¦ (kaite)"},
        "æ³³ã (oyogu) - æ¸¸": {"type": "ä¸€é¡ (äº”æ®µ)", "stem": "oyog", "te": "æ³³ã„ã§ (oyoide)"},
        "é£Ÿã¹ã‚‹ (taberu) - åƒ": {"type": "äºŒé¡ (ä¸€æ®µ)", "stem": "tabe", "te": "é£Ÿã¹ã¦ (tabete)"},
        "æ¥ã‚‹ (kuru) - ä¾†": {"type": "ä¸‰é¡ (è®Šæ ¼)", "stem": "ki", "te": "æ¥ã¦ (kite)"}
    }
    
    selected_verb_key = st.selectbox("é¸æ“‡ä¸€å€‹å‹•è©ä¾†ç·´ç¿’ï¼š", list(verbs.keys()))
    verb_info = verbs[selected_verb_key]
    
    st.subheader(f"ç•¶å‰å‹•è©ï¼š{selected_verb_key}")
    st.write(f"**åˆ†é¡**ï¼š{verb_info['type']}")
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        st.markdown("### ç¦®è²Œå½¢ (Masu)")
        st.markdown("æŠŠ `ã¾ã™` ä¸Ÿæ‰æ˜¯è®ŠåŒ–çš„ç¬¬ä¸€æ­¥ ã€‚")
        if verb_info['type'] == "ä¸€é¡ (äº”æ®µ)":
             st.code(f"{verb_info['stem']}i + ã¾ã™")
        elif verb_info['type'] == "äºŒé¡ (ä¸€æ®µ)":
             st.code(f"{verb_info['stem']} + ã¾ã™")
        else:
             st.code(f"{verb_info['stem']} + ã¾ã™")

    with col2:
        st.markdown("### å¦å®šå½¢ (Nai)")
        st.markdown("ã‚æ®µéŸ³ + ãªã„ ")
        if verb_info['type'] == "ä¸€é¡ (äº”æ®µ)":
             # ç°¡å–®è™•ç†é‚è¼¯ï¼Œå¯¦éš›æ‡‰ç”¨éœ€æ›´è¤‡é›œçš„è®Šæ›å‡½æ•¸
             stem_a = verb_info['stem'][:-1] + 'a' if verb_info['stem'][-1] != 'u' else verb_info['stem'][:-1] + 'wa'
             # ä¿®æ­£ kaku -> kaka, oyogu -> oyoga
             if verb_info['stem'][-1] == 'k': stem_a = verb_info['stem'][:-1] + 'ka'
             if verb_info['stem'][-1] == 'g': stem_a = verb_info['stem'][:-1] + 'ga'
             st.code(f"{stem_a} + ãªã„")
        elif verb_info['type'] == "äºŒé¡ (ä¸€æ®µ)":
             st.code(f"{verb_info['stem']} + ãªã„")
        
    with col3:
        st.markdown("### ã¦å½¢ (Te)")
        st.markdown("ä¸€é¡å‹•è©æœƒç™¼ç”Ÿã€ŒéŸ³ä¾¿ã€ ã€‚")
        st.code(verb_info['te'])

# --- 4. JLPT æ”»ç•¥ ---
elif page == "JLPT æ”»ç•¥":
    st.title("ğŸ† JLPT æ—¥æœ¬èªèƒ½åŠ›è©¦é©—")
    st.write("JLPT æ˜¯å…¨çƒæœ€å…·æ¬Šå¨æ€§çš„æ—¥èªèƒ½åŠ›èªè­‰ ã€‚")
    
    tab1, tab2 = st.tabs(["ç´šæ•¸èªªæ˜", "è€ƒè©¦è²»ç”¨"])
    
    with tab1:
        st.markdown("""
        | ç´šæ•¸ | é›£åº¦ | é©åˆå°è±¡ | èªªæ˜ |
        |---|---|---|---|
        | **N5** | åˆç´š | æ–°æ‰‹ã€åˆå­¸è€… | ç†è§£åŸºæœ¬è©å½™ã€è‡ªæˆ‘ä»‹ç´¹ [cite: 233] |
        | **N4** | åˆç´šé€²éš | å­¸ç¿’ 1 å¹´ä»¥ä¸Š | ç†è§£æ—¥å¸¸åŸºæœ¬èªå¥ [cite: 234] |
        | **N3** | ä¸­ç´š | å­¸ç¿’ 1.5-2 å¹´ | ç†è§£æ—¥å¸¸è©±é¡Œï¼Œå°šä¸è¶³æ‡‰å°å­¸è¡“ [cite: 234] |
        | **N2** | æº–é«˜ç´š | æ—¥å•†æ±‚è·è€… | ç†è§£æ–°èã€é›œèªŒï¼Œæ—¥å•†åŸºæœ¬é–€æª» [cite: 235] |
        | **N1** | é«˜ç´š | ç¿»è­¯ã€å°ˆæ¥­å·¥ä½œ | ç†è§£æŠ½è±¡è¤‡é›œæ–‡ç« ã€ç¤¾è«– [cite: 236] |
        """)
    
    with tab2:
        st.write("2025 å¹´å ±åè²»ç”¨åƒè€ƒ [cite: 239]ï¼š")
        cost_data = {
            "åœ°å€": ["å°ç£", "æ—¥æœ¬", "é¦™æ¸¯"],
            "N1-N3 è²»ç”¨": ["NT$ 1,600", "Â¥ 7,500", "HK$ 700"],
            "N4-N5 è²»ç”¨": ["NT$ 1,500", "Â¥ 6,500", "HK$ 700"]
        }
        st.table(pd.DataFrame(cost_data))

# --- 5. å­¸ç¿’è³‡æºæ¨è–¦ ---
elif page == "å­¸ç¿’è³‡æºæ¨è–¦":
    st.title("ğŸ“š å„ªè³ªå­¸ç¿’è³‡æº")
    st.markdown("æ•´ç†è‡ª PTT å’Œ Dcard ç¶²å‹æ¨è–¦çš„ç·šä¸Šèª²ç¨‹ ã€‚")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("å…è²»è³‡æº")
        st.markdown("""
        - **å°å¤§æ—¥æ–‡ç·šä¸Šèª²ç¨‹**ï¼šå°å¤§æ—¥æ–‡ç³»æ­£å¼èª²ç¨‹ï¼Œç³»çµ±æ€§å¼·ï¼Œé©åˆé›¶åŸºç¤ [cite: 52]ã€‚
        - **NHK News Web Easy**ï¼šé©åˆåˆä¸­ç´šç·´ç¿’é–±è®€ [cite: 75]ã€‚
        - **äº•ä¸Šä¸€å® YouTube**ï¼šå…¨ä¸­æ–‡è¬›è§£ï¼Œé©åˆåˆå­¸è€… [cite: 56]ã€‚
        """)
        
    with col2:
        st.subheader("ä»˜è²»/å®¶æ•™å¹³å°")
        st.markdown("""
        - **AmazingTalker**ï¼š1å°1å®¢è£½åŒ–ï¼Œæ™‚é–“å½ˆæ€§ [cite: 47]ã€‚
        - **ä½•å¿…æ—¥èª**ï¼šé‡è¦–é‡éŸ³èˆ‡æœ—è®€ï¼Œå½±ç‰‡æ•™å­¸ [cite: 48]ã€‚
        - **ç¹ç”°å¡¾**ï¼šé‡å° JLPT è€ƒè©¦æŠ€å·§ï¼Œæ—¥ç±å¸«è³‡ [cite: 47]ã€‚
        """)
